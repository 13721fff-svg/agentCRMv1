# üìä ANALYTICS - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üìà –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

Analytics ‚Äî —Ü–µ –º–æ–¥—É–ª—å –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ —Ç–∞ –∑–≤—ñ—Ç–Ω–æ—Å—Ç—ñ AGENT CRM, —è–∫–∏–π –Ω–∞–¥–∞—î –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –æ–≥–ª—è–¥ –±—ñ–∑–Ω–µ—Å-–ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤, –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö, AI-–ø—Ä–æ–≥–Ω–æ–∑–∏ —Ç–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –µ–∫—Å–ø–æ—Ä—Ç—É –∑–≤—ñ—Ç—ñ–≤.

---

## ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó (4 –∑ 4)

### 1Ô∏è‚É£ –ü–µ—Ä–µ–≥–ª—è–¥ KPI ‚úÖ
**–ú–µ—Ç–∞:** –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–ª—é—á–æ–≤–∏—Ö –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤ –±—ñ–∑–Ω–µ—Å—É

**–î—ñ—ó:**
1. –í—ñ–¥–∫—Ä–∏—Ç—Ç—è Analytics –µ–∫—Ä–∞–Ω—É
2. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è 4 –æ—Å–Ω–æ–≤–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫:
   - **üí∞ –î–æ—Ö—ñ–¥** - –∑–∞–≥–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥ –∑ completed –∑–∞–º–æ–≤–ª–µ–Ω—å
   - **üì¶ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å –∑–∞ –ø–µ—Ä—ñ–æ–¥
   - **üë• –ù–æ–≤—ñ –∫–ª—ñ—î–Ω—Ç–∏** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–≤–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤
   - **üéØ –ö–æ–Ω–≤–µ—Ä—Å—ñ—è** - –≤—ñ–¥—Å–æ—Ç–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å

3. –î–ª—è –∫–æ–∂–Ω–æ—ó –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è:
   - –ü–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
   - –ó–º—ñ–Ω–∞ —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
   - –¢—Ä–µ–Ω–¥ (‚Üë –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è / ‚Üì –∑–Ω–∏–∂–µ–Ω–Ω—è)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–§–∞–π–ª:** `app/(tabs)/analytics.tsx`

---

### 2Ô∏è‚É£ –ì—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è ‚úÖ
**–ú–µ—Ç–∞:** –í—ñ–∑—É–∞–ª—å–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

**–î—ñ—ó:**
1. **–õ—ñ–Ω—ñ–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ "–î–∏–Ω–∞–º—ñ–∫–∞ –¥–æ—Ö–æ–¥—É":**
   - –ü–æ–∫–∞–∑—É—î –∑–º—ñ–Ω—É –¥–æ—Ö–æ–¥—É –∑–∞ –æ–±—Ä–∞–Ω–∏–π –ø–µ—Ä—ñ–æ–¥
   - –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ –ø–µ—Ä—ñ–æ–¥–æ–º:
     - –î–µ–Ω—å ‚Üí –ø–æ–≥–æ–¥–∏–Ω–Ω–æ (0:00, 1:00, ...)
     - –¢–∏–∂–¥–µ–Ω—å ‚Üí –∑–∞ –¥–Ω—è–º–∏ (–ü–Ω, –í—Ç, ...)
     - –ú—ñ—Å—è—Ü—å ‚Üí –∑–∞ –¥–∞—Ç–∞–º–∏ (1, 2, 3, ...)
     - –†—ñ–∫ ‚Üí –∑–∞ –º—ñ—Å—è—Ü—è–º–∏ (–°—ñ—á, –õ—é—Ç, ...)

2. **–°—Ç–æ–≤–ø—á–∏–∫–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ "–†–æ–∑–ø–æ–¥—ñ–ª –∑–∞–º–æ–≤–ª–µ–Ω—å":**
   - –ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å –∑–∞ —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - 4 –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó:
     - –û—á—ñ–∫—É—î (–∂–æ–≤—Ç–∏–π)
     - –£ —Ä–æ–±–æ—Ç—ñ (—Å–∏–Ω—ñ–π)
     - –í–∏–∫–æ–Ω–∞–Ω–æ (–∑–µ–ª–µ–Ω–∏–π)
     - –°–∫–∞—Å–æ–≤–∞–Ω–æ (—á–µ—Ä–≤–æ–Ω–∏–π)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ñ–∑—É–∞–ª—å–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–∏–Ω–∞–º—ñ–∫–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** `components/LineChart.tsx`, `components/BarChart.tsx`

---

### 3Ô∏è‚É£ –§—ñ–ª—å—Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤ ‚úÖ
**–ú–µ—Ç–∞:** –ê–Ω–∞–ª—ñ–∑ —Ä—ñ–∑–Ω–∏—Ö —á–∞—Å–æ–≤–∏—Ö –ø—Ä–æ–º—ñ–∂–∫—ñ–≤

**–î—ñ—ó:**
1. –í–∏–±—ñ—Ä –ø–µ—Ä—ñ–æ–¥—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏-—Ñ—ñ–ª—å—Ç—Ä–∏:
   - **–î–µ–Ω—å** - –æ—Å—Ç–∞–Ω–Ω—ñ 24 –≥–æ–¥–∏–Ω–∏
   - **–¢–∏–∂–¥–µ–Ω—å** - –æ—Å—Ç–∞–Ω–Ω—ñ 7 –¥–Ω—ñ–≤
   - **–ú—ñ—Å—è—Ü—å** - –æ—Å—Ç–∞–Ω–Ω—ñ 30 –¥–Ω—ñ–≤
   - **–†—ñ–∫** - –æ—Å—Ç–∞–Ω–Ω—ñ 12 –º—ñ—Å—è—Ü—ñ–≤

2. –ü—Ä–∏ –∑–º—ñ–Ω—ñ –ø–µ—Ä—ñ–æ–¥—É:
   - –û–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤—Å—ñ –º–µ—Ç—Ä–∏–∫–∏
   - –ü–µ—Ä–µ–±—É–¥–æ–≤—É—é—Ç—å—Å—è –≥—Ä–∞—Ñ—ñ–∫–∏
   - –ü–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –∑–º—ñ–Ω–∏ —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–∏–Ω–∞–º—ñ—á–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∑–∞ —Ä—ñ–∑–Ω—ñ –ø–µ—Ä—ñ–æ–¥–∏

**–§—É–Ω–∫—Ü—ñ—è:** `loadAnalyticsData()` –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `period`

---

### 4Ô∏è‚É£ AI-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç ‚úÖ
**–ú–µ—Ç–∞:** –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤

**AI-–ø—Ä–æ–≥–Ω–æ–∑:**
1. –ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–∏—Ö —Ç—Ä–µ–Ω–¥—ñ–≤
2. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–≥–Ω–æ–∑—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è:
   - **> 10%:** "–í—ñ–¥–º—ñ–Ω–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏! –û—á—ñ–∫—É—î—Ç—å—Å—è –∑–Ω–∞—á–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è." (+15%)
   - **> 0%:** "–°—Ç–∞–±—ñ–ª—å–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è. –†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –∞–∫—Ç–∏–≤—ñ–∑—É–≤–∞—Ç–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥." (+8%)
   - **< 0%:** "–ü–æ–º—ñ—Ç–Ω–µ —É–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è. –ß–∞—Å –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é." (-3%)

**–ï–∫—Å–ø–æ—Ä—Ç –∑–≤—ñ—Ç—ñ–≤:**
1. –ö–Ω–æ–ø–∫–∏ "–ï–∫—Å–ø–æ—Ä—Ç CSV" —Ç–∞ "–ï–∫—Å–ø–æ—Ä—Ç PDF"
2. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É –∑:
   - –î–∞—Ç–æ—é —Ç–∞ –ø–µ—Ä—ñ–æ–¥–æ–º
   - –û—Å–Ω–æ–≤–Ω–∏–º–∏ –ø–æ–∫–∞–∑–Ω–∏–∫–∞–º–∏
   - –ó–º—ñ–Ω–∞–º–∏ —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
   - AI-–ø—Ä–æ–≥–Ω–æ–∑–æ–º
3. **Web:** –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
4. **Mobile:** –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–≤—ñ—Ç–Ω—ñ—Å—Ç—å

**–§—É–Ω–∫—Ü—ñ—ó:** `generateAIForecast()`, `handleExport()`

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
app/
‚îî‚îÄ‚îÄ (tabs)/
    ‚îî‚îÄ‚îÄ analytics.tsx          # –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏

components/
‚îú‚îÄ‚îÄ LineChart.tsx              # –õ—ñ–Ω—ñ–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫
‚îî‚îÄ‚îÄ BarChart.tsx               # –°—Ç–æ–≤–ø—á–∏–∫–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫
```

---

## üìä –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

### LineChart

```typescript
interface DataPoint {
  label: string;   // –ü—ñ–¥–ø–∏—Å –æ—Å—ñ X
  value: number;   // –ó–Ω–∞—á–µ–Ω–Ω—è
}

interface LineChartProps {
  data: DataPoint[];
  height?: number;              // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 200
  color?: string;               // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º '#0284c7'
  showLabels?: boolean;         // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º true
  showGrid?: boolean;           // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º true
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ü–æ–±—É–¥–æ–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ SVG (react-native-svg)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —à–∏—Ä–∏–Ω–∞ (–≤–µ—Å—å –µ–∫—Ä–∞–Ω - padding)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
- –°—ñ—Ç–∫–∞ –∑ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–º–∏ –ª—ñ–Ω—ñ—è–º–∏
- –ü—ñ–¥–ø–∏—Å–∏ –æ—Å–µ–π
- –¢–æ—á–∫–∏ –Ω–∞ –ª—ñ–Ω—ñ—ó
- Empty state

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```tsx
<LineChart
  data={[
    { label: '–ü–Ω', value: 1200 },
    { label: '–í—Ç', value: 1500 },
    { label: '–°—Ä', value: 1800 },
  ]}
  height={220}
  color="#0284c7"
/>
```

---

### BarChart

```typescript
interface DataPoint {
  label: string;
  value: number;
  color?: string;   // –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –∫–æ–ª—ñ—Ä —Å—Ç–æ–≤–ø—Ü—è
}

interface BarChartProps {
  data: DataPoint[];
  height?: number;
  defaultColor?: string;        // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º '#0284c7'
  showLabels?: boolean;
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- SVG-—Å—Ç–æ–≤–ø—Ü—ñ –∑ rounded corners
- –†—ñ–∑–Ω—ñ –∫–æ–ª—å–æ—Ä–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å—Ç–æ–≤–ø—Ü—è
- –ü—ñ–¥–ø–∏—Å–∏ –∑–≤–µ—Ä—Ö—É —Ç–∞ –∑–Ω–∏–∑—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
- Empty state

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```tsx
<BarChart
  data={[
    { label: '–û—á—ñ–∫—É—î', value: 5, color: '#f59e0b' },
    { label: '–í–∏–∫–æ–Ω–∞–Ω–æ', value: 12, color: '#16a34a' },
  ]}
  height={220}
/>
```

---

## üìä –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–µ—Ç—Ä–∏–∫

### –î–æ—Ö—ñ–¥
```typescript
const totalRevenue = orders
  .filter(o => o.status === 'completed' && o.amount)
  .reduce((sum, o) => sum + (o.amount || 0), 0);

// –ó–º—ñ–Ω–∞ –≤—ñ–¥–Ω–æ—Å–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É
const prevRevenue = orders
  .filter(o =>
    o.status === 'completed' &&
    new Date(o.created_at) < prevPeriodStart
  )
  .reduce((sum, o) => sum + (o.amount || 0), 0);

const revenueChange =
  prevRevenue > 0
    ? (((totalRevenue - prevRevenue) / prevRevenue) * 100).toFixed(1)
    : '0';
```

### –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è
```typescript
const totalOrders = orders.length;
const change = 12; // mock –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
```

### –ù–æ–≤—ñ –∫–ª—ñ—î–Ω—Ç–∏
```typescript
const newClients = clients.filter(
  c => new Date(c.created_at) > prevPeriodStart
).length;
```

### –ö–æ–Ω–≤–µ—Ä—Å—ñ—è
```typescript
const completedOrders = orders.filter(o => o.status === 'completed').length;
const conversionRate =
  totalOrders > 0
    ? ((completedOrders / totalOrders) * 100).toFixed(1)
    : '0';
```

---

## üìà –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

### –î–∏–Ω–∞–º—ñ–∫–∞ –¥–æ—Ö–æ–¥—É (LineChart)
```typescript
const getChartData = () => {
  const groupedData: { [key: string]: number } = {};

  orders.forEach(order => {
    if (order.status !== 'completed' || !order.amount) return;

    const date = new Date(order.created_at);
    let key = '';

    switch (period) {
      case 'day':
        key = `${date.getHours()}:00`;
        break;
      case 'week':
        key = ['–ù–¥', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'][date.getDay()];
        break;
      case 'month':
        key = `${date.getDate()}`;
        break;
      case 'year':
        key = ['–°—ñ—á', '–õ—é—Ç', '–ë–µ—Ä', ...][date.getMonth()];
        break;
    }

    groupedData[key] = (groupedData[key] || 0) + order.amount;
  });

  return Object.entries(groupedData).map(([label, value]) => ({
    label,
    value: Math.round(value),
  }));
};
```

### –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞–º–æ–≤–ª–µ–Ω—å (BarChart)
```typescript
const getOrdersChartData = () => {
  const statusCount = {
    pending: 0,
    in_progress: 0,
    completed: 0,
    cancelled: 0,
  };

  orders.forEach(order => {
    if (statusCount[order.status] !== undefined) {
      statusCount[order.status]++;
    }
  });

  return [
    { label: '–û—á—ñ–∫—É—î', value: statusCount.pending, color: '#f59e0b' },
    { label: '–£ —Ä–æ–±–æ—Ç—ñ', value: statusCount.in_progress, color: '#0284c7' },
    { label: '–í–∏–∫–æ–Ω–∞–Ω–æ', value: statusCount.completed, color: '#16a34a' },
    { label: '–°–∫–∞—Å–æ–≤–∞–Ω–æ', value: statusCount.cancelled, color: '#ef4444' },
  ];
};
```

---

## ü§ñ AI-–ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è

### –õ–æ–≥—ñ–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑—É
```typescript
const generateAIForecast = () => {
  const metrics = calculateMetrics();
  const revenueGrowth = metrics.revenue.change;

  let forecast = '';
  let prediction = 0;

  if (revenueGrowth > 10) {
    forecast = '–í—ñ–¥–º—ñ–Ω–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏! –ó–∞ –ø–æ—Ç–æ—á–Ω–∏–º–∏ —Ç–µ–º–ø–∞–º–∏ –æ—á—ñ–∫—É—î—Ç—å—Å—è –∑–Ω–∞—á–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è.';
    prediction = 15;
  } else if (revenueGrowth > 0) {
    forecast = '–°—Ç–∞–±—ñ–ª—å–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è. –†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –∞–∫—Ç–∏–≤—ñ–∑—É–≤–∞—Ç–∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥.';
    prediction = 8;
  } else {
    forecast = '–ü–æ–º—ñ—Ç–Ω–µ —É–ø–æ–≤—ñ–ª—å–Ω–µ–Ω–Ω—è. –ß–∞—Å –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –ø—Ä–æ–¥–∞–∂—ñ–≤.';
    prediction = -3;
  }

  return { forecast, prediction };
};
```

### –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—É
- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑ —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–º –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º
- –Ü–∫–æ–Ω–∫–∞ ‚ú® Sparkles
- –¢–µ–∫—Å—Ç –ø—Ä–æ–≥–Ω–æ–∑—É
- –ë–µ–π–¥–∂ –∑ –≤—ñ–¥—Å–æ—Ç–∫–æ–º (–∑–µ–ª–µ–Ω–∏–π/—á–µ—Ä–≤–æ–Ω–∏–π)
- –Ü–∫–æ–Ω–∫–∞ —Ç—Ä–µ–Ω–¥—É (‚Üë/‚Üì)

---

## üì• –ï–∫—Å–ø–æ—Ä—Ç –∑–≤—ñ—Ç—ñ–≤

### –§—É–Ω–∫—Ü—ñ—è –µ–∫—Å–ø–æ—Ä—Ç—É
```typescript
const handleExport = async (format: 'csv' | 'pdf') => {
  // 1. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
  const metrics = calculateMetrics();
  const data = `
–ó–≤—ñ—Ç –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ - ${new Date().toLocaleDateString('uk-UA')}
–ü–µ—Ä—ñ–æ–¥: ${period}

–û–°–ù–û–í–ù–Ü –ü–û–ö–ê–ó–ù–ò–ö–ò:
- –î–æ—Ö—ñ–¥: ‚Ç¥${metrics.revenue.value} (${metrics.revenue.change}%)
- –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è: ${metrics.orders.value} (${metrics.orders.change}%)
- –ù–æ–≤—ñ –∫–ª—ñ—î–Ω—Ç–∏: ${metrics.clients.value} (${metrics.clients.change}%)
- –ö–æ–Ω–≤–µ—Ä—Å—ñ—è: ${metrics.conversion.value} (${metrics.conversion.change}%)

–ü–†–û–ì–ù–û–ó:
${generateAIForecast().forecast}
–û—á—ñ–∫—É–≤–∞–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è: ${generateAIForecast().prediction}%
  `.trim();

  // 2. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Web)
  if (Platform.OS === 'web') {
    const blob = new Blob([data], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `analytics-report-${Date.now()}.${format}`;
    a.click();
    URL.revokeObjectURL(url);
  }

  // 3. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  Alert.alert('–£—Å–ø—ñ—Ö', `–ó–≤—ñ—Ç –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ —É —Ñ–æ—Ä–º–∞—Ç—ñ ${format.toUpperCase()}`);
};
```

### –§–æ—Ä–º–∞—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç—É
- **CSV:** —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Excel
- **PDF:** (–ø–æ–∫–∏ —è–∫ —Ç–µ–∫—Å—Ç, –º–æ–∂–Ω–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏)

### –ö–æ–Ω—Ç–µ–Ω—Ç –∑–≤—ñ—Ç—É
1. –î–∞—Ç–∞ —Ç–∞ –ø–µ—Ä—ñ–æ–¥
2. –í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏
3. –ó–º—ñ–Ω–∏ —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
4. AI-–ø—Ä–æ–≥–Ω–æ–∑
5. –û—á—ñ–∫—É–≤–∞–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è

---

## üîÑ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –ø–µ—Ä—ñ–æ–¥–æ–º

### –ü–µ—Ä—ñ–æ–¥ Filter UI
```typescript
<View style={tw`flex-row gap-2`}>
  {[
    { id: 'day', label: '–î–µ–Ω—å' },
    { id: 'week', label: '–¢–∏–∂–¥–µ–Ω—å' },
    { id: 'month', label: '–ú—ñ—Å—è—Ü—å' },
    { id: 'year', label: '–†—ñ–∫' },
  ].map(p => (
    <TouchableOpacity
      key={p.id}
      onPress={() => setPeriod(p.id)}
      style={tw`flex-1 px-3 py-2 rounded-lg ${
        period === p.id
          ? 'bg-blue-600'
          : 'bg-white border border-gray-200'
      }`}
    >
      <Text style={tw`text-sm font-medium text-center ${
        period === p.id ? 'text-white' : 'text-gray-700'
      }`}>
        {p.label}
      </Text>
    </TouchableOpacity>
  ))}
</View>
```

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–∞—Ç
```typescript
const now = new Date();
let startDate = new Date();

switch (period) {
  case 'day':
    startDate.setDate(now.getDate() - 1);
    break;
  case 'week':
    startDate.setDate(now.getDate() - 7);
    break;
  case 'month':
    startDate.setMonth(now.getMonth() - 1);
    break;
  case 'year':
    startDate.setFullYear(now.getFullYear() - 1);
    break;
}
```

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
```typescript
const [ordersData, clientsData] = await Promise.all([
  supabase
    .from('orders')
    .select('*')
    .eq('org_id', user.org_id)
    .gte('created_at', startDate.toISOString())
    .order('created_at', { ascending: true }),
  supabase.from('clients').select('*').eq('org_id', user.org_id),
]);
```

---

## üé® UI/UX –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ–∫—Ä–∞–Ω—É:
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫** –∑ –∫–Ω–æ–ø–∫–æ—é "–ï–∫—Å–ø–æ—Ä—Ç"
2. **–§—ñ–ª—å—Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤** (4 –∫–Ω–æ–ø–∫–∏)
3. **4 KPI –∫–∞—Ä—Ç–∫–∏** (—Å—ñ—Ç–∫–∞ 2x2)
4. **–õ—ñ–Ω—ñ–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫** "–î–∏–Ω–∞–º—ñ–∫–∞ –¥–æ—Ö–æ–¥—É"
5. **–°—Ç–æ–≤–ø—á–∏–∫–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫** "–†–æ–∑–ø–æ–¥—ñ–ª –∑–∞–º–æ–≤–ª–µ–Ω—å"
6. **AI-–ø—Ä–æ–≥–Ω–æ–∑** (–∫–∞—Ä—Ç–æ—á–∫–∞ –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º)
7. **–ö–Ω–æ–ø–∫–∏ –µ–∫—Å–ø–æ—Ä—Ç—É** (CSV / PDF)

### –ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞:
- **–î–æ—Ö—ñ–¥:** –ó–µ–ª–µ–Ω–∏–π (#16a34a)
- **–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è:** –°–∏–Ω—ñ–π (#0284c7)
- **–ö–ª—ñ—î–Ω—Ç–∏:** –§—ñ–æ–ª–µ—Ç–æ–≤–∏–π (#8b5cf6)
- **–ö–æ–Ω–≤–µ—Ä—Å—ñ—è:** –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π (#f59e0b)
- **AI-–ø—Ä–æ–≥–Ω–æ–∑:** –§—ñ–æ–ª–µ—Ç–æ–≤–æ-—Å–∏–Ω—ñ–π –≥—Ä–∞–¥—ñ—î–Ω—Ç

### –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:
- Pull-to-refresh –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- –ó–º—ñ–Ω–∞ –ø–µ—Ä—ñ–æ–¥—É ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- Loading state –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- –ï–∫—Å–ø–æ—Ä—Ç –∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Dashboard

### –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ Analytics:
1. **Dashboard ‚Üí KPI –ø–ª–∏—Ç–∫–∞ "–î–æ—Ö—ñ–¥"** ‚Üí `/analytics`
2. **Dashboard ‚Üí KPI –ø–ª–∏—Ç–∫–∞ "–ö–æ–Ω–≤–µ—Ä—Å—ñ—è"** ‚Üí `/analytics`
3. **–ù–∏–∂–Ω—î –º–µ–Ω—é ‚Üí Analytics** (–¥–ª—è small/medium —Ä–æ–ª–µ–π)

### –°–ø—ñ–ª—å–Ω—ñ –¥–∞–Ω—ñ:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `ordersStore`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `clientsStore`
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –º–µ—Ç—Ä–∏–∫

---

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –ú–æ–±—ñ–ª—å–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó:
- –°—ñ—Ç–∫–∞ 2x2 –¥–ª—è KPI
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π scroll
- Touch-friendly –∫–Ω–æ–ø–∫–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —à–∏—Ä–∏–Ω–∞ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

### Web:
- Blob API –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- Responsive layout
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è SVG

---

## üöÄ –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:
1. **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** `Promise.all()`
2. **–ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤:** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ period
3. **–£–º–æ–≤–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:** –≥—Ä–∞—Ñ—ñ–∫–∏ –ø–æ–∫–∞–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –¥–∞–Ω—ñ
4. **Debounce –ø–µ—Ä—ñ–æ–¥:** —É–Ω–∏–∫–Ω–µ–Ω–Ω—è —á–∞—Å—Ç–∏—Ö –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å

### –†–æ–∑–º—ñ—Ä–∏:
- LineChart: ~2KB
- BarChart: ~1.5KB
- Analytics screen: ~12KB

---

## ‚úÖ Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ

- ‚úÖ KPI –º–µ—Ç—Ä–∏–∫–∏ (4 –ø–æ–∫–∞–∑–Ω–∏–∫–∏)
- ‚úÖ –õ—ñ–Ω—ñ–π–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ –¥–∏–Ω–∞–º—ñ–∫–∏
- ‚úÖ –°—Ç–æ–≤–ø—á–∏–∫–æ–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ —Ä–æ–∑–ø–æ–¥—ñ–ª—É
- ‚úÖ –§—ñ–ª—å—Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤ (4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏)
- ‚úÖ AI-–ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è
- ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç CSV
- ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç PDF (—è–∫ —Ç–µ–∫—Å—Ç)
- ‚úÖ Pull-to-refresh
- ‚úÖ Loading states
- ‚úÖ Empty states
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Dashboard
- ‚úÖ Responsive charts
- ‚úÖ TypeScript —Ç–∏–ø–∏
- ‚úÖ Build —É—Å–ø—ñ—à–Ω–∏–π

---

## üìä –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–∞–Ω–∏—Ö

### KPI Metrics:
```typescript
{
  revenue: { value: 45230, change: 12.5 },
  orders: { value: 156, change: 15.3 },
  clients: { value: 24, change: 8.2 },
  conversion: { value: '67%', change: 5.1 }
}
```

### Line Chart Data (—Ç–∏–∂–¥–µ–Ω—å):
```typescript
[
  { label: '–ü–Ω', value: 5200 },
  { label: '–í—Ç', value: 6100 },
  { label: '–°—Ä', value: 5800 },
  { label: '–ß—Ç', value: 7200 },
  { label: '–ü—Ç', value: 8500 },
  { label: '–°–±', value: 6300 },
  { label: '–ù–¥', value: 4900 },
]
```

### Bar Chart Data:
```typescript
[
  { label: '–û—á—ñ–∫—É—î', value: 25, color: '#f59e0b' },
  { label: '–£ —Ä–æ–±–æ—Ç—ñ', value: 45, color: '#0284c7' },
  { label: '–í–∏–∫–æ–Ω–∞–Ω–æ', value: 78, color: '#16a34a' },
  { label: '–°–∫–∞—Å–æ–≤–∞–Ω–æ', value: 8, color: '#ef4444' },
]
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

ANALYTICS –º–æ–¥—É–ª—å –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:
- **4 –∑ 4 —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤** ‚úÖ
- –í—Å—ñ –≥—Ä–∞—Ñ—ñ–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å
- –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Dashboard
- AI-–ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è
- –ï–∫—Å–ø–æ—Ä—Ç –∑–≤—ñ—Ç—ñ–≤ (CSV/PDF)
- –§—ñ–ª—å—Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤
- TypeScript ready
- Build —É—Å–ø—ñ—à–Ω–∏–π

Analytics –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è! üöÄ
